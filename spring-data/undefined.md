# 데이터베이스 접근방법



## 1. **SQL 직접 사용**



**설명**: SQL 직접 사용 방식은 데이터베이스와 직접적으로 상호작용하여 쿼리를 작성하고 실행하는 접근 방식입니다. 이 방식은 데이터베이스와의 상호작용을 직접 제어할 수 있어 유연성과 성능 최적화가 가능합니다.



**주요 기술**:

* **JDBC (Java Database Connectivity)**: Java에서 데이터베이스와 연결하기 위한 기본 API입니다. SQL 쿼리를 직접 작성하여 데이터베이스와 상호작용합니다.

<figure><img src="../.gitbook/assets/image (7).png" alt=""><figcaption></figcaption></figure>

**장점**:

* **유연성**: 복잡한 쿼리와 데이터베이스 조작을 직접 제어할 수 있습니다.
* **성능 최적화**: 쿼리와 데이터베이스 상호작용을 최적화할 수 있습니다.

**단점**:

* **보일러플레이트 코드**: 많은 양의 반복 코드가 필요할 수 있습니다.
* **관계 매핑 제한**: 복잡한 관계 매핑을 직접 처리해야 합니다.



\=> JDBC의 단점인 보일러플레이트 코드와 매핑 작업의 복잡성을 줄이기 위해, SQL 매핑 프레임워크가 등장했습니다.

## 2. **SQL 매핑 프레임워크**



**설명**: SQL 매핑 프레임워크는 SQL 쿼리를 매핑하여 객체로 변환하는 기술입니다. 이 방식은 SQL과 객체 간의 매핑을 수동으로 정의하며, SQL을 직접 작성하면서도 객체 지향 프로그래밍의 이점을 유지할 수 있습니다.

**주요 기술**:

* **MyBatis**: SQL을 XML 파일이나 어노테이션으로 매핑하여 객체와 데이터베이스 간의 변환을 처리합니다.

<figure><img src="../.gitbook/assets/image (8).png" alt=""><figcaption></figcaption></figure>

**장점**:

* **세밀한 제어**: 복잡한 SQL 쿼리를 작성하고, 세밀하게 제어할 수 있습니다.
* **유연성**: SQL 쿼리를 직접 작성하면서도 객체 지향 프로그래밍의 이점을 누릴 수 있습니다.

**단점**:

* **매핑 관리**: 매핑 파일을 관리해야 하며, 설정과 유지보수에 추가 작업이 필요합니다.
* **보일러플레이트 코드**: 매핑과 관련된 코드가 추가로 필요합니다.



\=> **MyBatis**의 단점인 보일러플레이트 코드와 객체와 테이블 간의 매핑,  테이블 구조와 객체 간의 일관성 유지의  어려움의Q이유로 **객체-관계 매핑** 프레임워크가 등장했습니다.



## 3. **객체-관계 매핑 (ORM, Object-Relational Mapping)**





**설명**: 객체-관계 매핑(ORM)은 객체 지향 프로그래밍 언어의 객체와 관계형 데이터베이스의 테이블 간의 매핑을 자동화하는 방식입니다. ORM 프레임워크는 객체와 데이터베이스 사이의 변환을 자동으로 처리하여 개발자가 직접 SQL 쿼리를 작성할 필요를 줄여줍니다.

**주요 기술**:

* **Hibernate**: Java에서 널리 사용되는 ORM 프레임워크로, 객체와 테이블 간의 매핑을 자동으로 처리합니다.
* **Spring Data JPA**: Spring Framework와 함께 사용하는 JPA(Java Persistence API) 기반의 ORM 솔루션으로, JPA의 표준 기능을 제공하고, 더 나아가 고수준의 데이터 접근을 지원합니다.

<figure><img src="../.gitbook/assets/image (3) (1).png" alt=""><figcaption></figcaption></figure>

* JPA는 ORM을 위한 자바 EE 표준이며 Spring-Data-JPA는 JPA를 쉽게 사용하기 위해 스프링에서 제공하고 있는 프레임워크이다.
* 추상화 정도는 `Spring-Data-JPA -> Hibernate -> JPA`이다.
* Spring Data JPA, Spring Data MongoDB, Spring Data Redis등 Spring Data의 하위 프로젝트들은 findAll(), save()등을 동일한 인터페이스로 가지고 있기 때문에 저장소를 교체해도 기본적인 기능이 변하지않는다.

**장점**:

* **생산성 향상**: 객체와 데이터베이스 간의 변환을 자동으로 처리하여 개발 속도를 높입니다.
* **유지보수 용이**: 코드가 더 직관적이고 유지보수가 용이합니다.
* **복잡한 관계 지원**: 일대일, 일대다, 다대다 등 다양한 관계 매핑을 지원합니다.

**단점**:

* **성능 문제**: 자동 매핑과 복잡한 쿼리 생성으로 인해 성능이 저하될 수 있습니다.
* **학습 곡선**: ORM 프레임워크에 대한 이해와 설정이 필요합니다.



*   ### JPA 동작 과정 <a href="#jpa" id="jpa"></a>

    <figure><img src="../.gitbook/assets/image (4) (1).png" alt=""><figcaption></figcaption></figure>
* **개발자가 JPA를 사용하면, JPA 내부에서 JDBC API를 사용하여 SQL을 호출하여 DB와 통신한다**

